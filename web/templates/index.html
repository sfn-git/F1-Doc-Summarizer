<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% include 'libs.html' %}
    <title>FIA Doc Manager</title>
</head>

<body>
    {% include 'nav.html' %}

    <div class="container">
        <h1>All Documents</h1>
        {% for doc in docs %}
        <p class="d-inline-flex gap-1">
            <button class="btn btn-primary" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseElm{{loop.index}}" aria-expanded="false"
                aria-controls="collapseElm{{loop.index}}">
                {{doc.document_name}}
            </button>
        </p>
        <div class="collapse show" id="collapseElm{{loop.index}}">
            <div class="card card-body">
                <h2><a class="button btn-primary" href="{{doc.document_link}}" target="_blank">{{doc.document_name}}</a></h2>
                <p>{{doc.document_date}}</p>
                <div class="table-responsive">
                    <table class="table table-primary">
                        <thead>
                            <tr>
                                <th scope="col">Webhook Name</th>
                                <th scope="col">Sent Status</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {%for wh in doc.webhooks%}

                                <tr>
                                    <td>{{wh.webhook_name}}</td>
                                    <td>
                                        {%if wh.skip == 1%}
                                            <span class="badge text-bg-primary">Skipped Send</span>
                                        {%elif wh.sent == 1%}
                                            <span class="badge text-bg-success">Sent</span>
                                        {%else%}
                                            <span class="badge text-bg-warning">Pending</span>
                                        {%endif%}
                                    </td>
                                    <td>
                                        <a class="btn btn-primary" href="/send?id={{wh.send_id}}">Send</a>
                                        {%if wh.skip == 1 or wh.sent == 1%}
                                            <a class="btn btn-warning" href="/queue?id={{wh.send_id}}">Queue</a>
                                        {%elif wh.skip == 0 or wh.sent == 0%}
                                            <a class="btn btn-danger" href="/cancel?id={{wh.send_id}}">Cancel</a>
                                        {%endif%}
                                        
                                    </td>
                                </tr>
                            {%endfor%}
                        </tbody>
                    </table>
                </div>

                
            </div>
        </div>
        <br>
        {% endfor %}
    </div>


</body>

</html>